/**
 * This patch changes Avoid to be a toggle and work regardless of party level.
 * Ported over from the UPS files of the original GS2 randomiser.
 */

const { writeArray } = require('../../../util/binary.js');

function apply(rom) {
    // Alter level checking functions
    writeArray(rom, 0xCA054, [0x1, 0x20]);
    writeArray(rom, 0xCB558, [0x13, 0x1C]);

    // Change Avoid to a toggle
    writeArray(rom, 0xE1266, [0x13, 0x68, 0x53, 0x40]);

    // Jump to custom Avoid text display function
    writeArray(rom, 0xE1354, [0x12, 0xF0, 0xD4, 0xFD, 0x0, 0xE0]);

    // Insert Avoid text display function
    writeArray(rom, 0xF3F00, [0x60, 0xB5, 0x7, 0x4D, 0x2D, 0x68, 0x7, 0x48, 0x0, 0x2D, 0x5, 0xDC, 0x6, 0x0, 0x96, 0x20, 0x4, 0x21, 0x48, 0xF7,
        0xDD, 0xFE, 0x70, 0x1C, 0x1, 0x21, 0x46, 0xF7, 0x47, 0xFC, 0x60, 0xBD, 0xA4, 0x4, 0x0, 0x2, 0xBE, 0xD, 0x0, 0x0]);
}

module.exports = {apply};